(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{6546:function(e,t,r){Promise.resolve().then(r.bind(r,6593))},6593:function(e,t,r){"use strict";r.d(t,{default:function(){return m}});var n=r(2403),a=r(3583),s=r(6200),o=r(7437),l=r(9376),i=r(2265),d=r(7648),u=r(6122),c=r(8516);function m(e){var t,r,m,g,p,x,h=e.post,b=(0,l.useRouter)(),f=(0,a._)((0,i.useState)(h.title),2),y=f[0],j=f[1],v=(0,a._)((0,i.useState)(h.content),2),N=v[0],w=v[1],k=(0,a._)((0,i.useState)(h.slug),2),C=k[0],S=k[1],_=(0,a._)((0,i.useState)(h.published),2),F=_[0],D=_[1],E=(0,a._)((0,i.useState)(h.categoryId||""),2),L=E[0],I=E[1],P=(0,a._)((0,i.useState)(void 0===h.allowComments||h.allowComments),2),T=P[0],A=P[1],O=(0,a._)((0,i.useState)([]),2),q=O[0],z=O[1],R=(0,a._)((0,i.useState)(h.metaTitle||""),2),V=R[0],B=R[1],J=(0,a._)((0,i.useState)(h.metaDescription||""),2),M=J[0],G=J[1],U=(0,a._)((0,i.useState)((null===(g=h.keywords)||void 0===g?void 0:g.join(", "))||""),2),W=U[0],Z=U[1],K=(0,a._)((0,i.useState)(h.featuredImage||""),2),H=K[0],Q=K[1],X=(0,a._)((0,i.useState)(h.featuredImageAlt||""),2),Y=X[0],$=X[1],ee=(0,a._)((0,i.useState)(h.downloadLink||""),2),et=ee[0],er=ee[1],en=(0,a._)((0,i.useState)(h.developer||""),2),ea=en[0],es=en[1],eo=(0,a._)((0,i.useState)(h.appSize||""),2),el=eo[0],ei=eo[1],ed=(0,a._)((0,i.useState)(h.appVersion||""),2),eu=ed[0],ec=ed[1],em=(0,a._)((0,i.useState)(h.requirements||""),2),eg=em[0],ep=em[1],ex=(0,a._)((0,i.useState)(h.downloads||""),2),eh=ex[0],eb=ex[1],ef=(0,a._)((0,i.useState)(h.googlePlayLink||""),2),ey=ef[0],ej=ef[1],ev=(0,a._)((0,i.useState)((null===(p=h.rating)||void 0===p?void 0:p.toString())||""),2),eN=ev[0],ew=ev[1],ek=(0,a._)((0,i.useState)((null===(x=h.ratingCount)||void 0===x?void 0:x.toString())||"0"),2),eC=ek[0],eS=ek[1],e_=(0,a._)((0,i.useState)(!1),2),eF=e_[0],eD=e_[1],eE=(0,a._)((0,i.useState)(""),2),eL=eE[0],eI=eE[1];(0,i.useEffect)(function(){eP()},[]);var eP=(t=(0,n._)(function(){var e;return(0,s.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,fetch("/api/categories")];case 1:if(!(e=t.sent()).ok)return[3,3];return[4,e.json()];case 2:z(t.sent()),t.label=3;case 3:return[3,5];case 4:return console.error("Error fetching categories:",t.sent()),[3,5];case 5:return[2]}})}),function(){return t.apply(this,arguments)}),eT=(r=(0,n._)(function(e){var t;return(0,s.Jh)(this,function(r){switch(r.label){case 0:e.preventDefault(),eI(""),eD(!0),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,fetch("/api/posts/".concat(h.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:y,content:N,slug:C,published:F,categoryId:L||null,allowComments:T,metaTitle:V||y,metaDescription:M,keywords:W.split(",").map(function(e){return e.trim()}).filter(Boolean),featuredImage:H,featuredImageAlt:Y,downloadLink:et,developer:ea,appSize:el,appVersion:eu,requirements:eg,downloads:eh,googlePlayLink:ey,rating:eN?parseFloat(eN):null,ratingCount:eC?parseInt(eC):0})})];case 2:if((t=r.sent()).ok)return[3,4];return[4,t.json()];case 3:throw Error(r.sent().error||"Failed to update post");case 4:return b.push("/dashboard"),b.refresh(),[3,6];case 5:return eI(r.sent().message),eD(!1),[3,6];case 6:return[2]}})}),function(e){return r.apply(this,arguments)}),eA=(m=(0,n._)(function(){return(0,s.Jh)(this,function(e){switch(e.label){case 0:if(!confirm("Are you sure you want to delete this post?"))return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch("/api/posts/".concat(h.id),{method:"DELETE"})];case 2:if(!e.sent().ok)throw Error("Failed to delete post");return b.push("/dashboard"),b.refresh(),[3,4];case 3:return eI(e.sent().message),[3,4];case 4:return[2]}})}),function(){return m.apply(this,arguments)});return(0,o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,o.jsx)("nav",{className:"border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,o.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,o.jsx)(d.default,{href:"/dashboard",className:"text-2xl font-bold text-gray-900",children:"Blog CMS"})})})}),(0,o.jsx)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Edit Post"}),eL&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:eL}),(0,o.jsxs)("form",{onSubmit:eT,className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),(0,o.jsx)("input",{id:"title",type:"text",value:y,onChange:function(e){return j(e.target.value)},required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug"}),(0,o.jsx)("input",{id:"slug",type:"text",value:C,onChange:function(e){return S(e.target.value)},required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),(0,o.jsx)(u.Z,{id:"content",value:N,onChange:w,placeholder:"Write your post content here..."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"downloadLink",className:"block text-sm font-medium text-gray-700 mb-2",children:"Download Link (optional)"}),(0,o.jsx)("input",{id:"downloadLink",type:"url",value:et,onChange:function(e){return er(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"https://example.com/file.pdf"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Link to downloadable file (PDF, document, etc.)"})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"App Details"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"developer",className:"block text-sm font-medium text-gray-700 mb-2",children:"Developer"}),(0,o.jsx)("input",{id:"developer",type:"text",value:ea,onChange:function(e){return es(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"e.g., 666W"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"appSize",className:"block text-sm font-medium text-gray-700 mb-2",children:"Size"}),(0,o.jsx)("input",{id:"appSize",type:"text",value:el,onChange:function(e){return ei(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"e.g., 6.95 MB"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"appVersion",className:"block text-sm font-medium text-gray-700 mb-2",children:"Version"}),(0,o.jsx)("input",{id:"appVersion",type:"text",value:eu,onChange:function(e){return ec(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"e.g., V1.1.52"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"requirements",className:"block text-sm font-medium text-gray-700 mb-2",children:"Requirements"}),(0,o.jsx)("input",{id:"requirements",type:"text",value:eg,onChange:function(e){return ep(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"e.g., Android 5.0 & Above"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"downloads",className:"block text-sm font-medium text-gray-700 mb-2",children:"Downloads"}),(0,o.jsx)("input",{id:"downloads",type:"text",value:eh,onChange:function(e){return eb(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"e.g., 5000+"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"googlePlayLink",className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Play Link (optional)"}),(0,o.jsx)("input",{id:"googlePlayLink",type:"url",value:ey,onChange:function(e){return ej(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"https://play.google.com/store/apps/..."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"rating",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating (0.0 - 5.0)"}),(0,o.jsx)("input",{id:"rating",type:"number",min:"0",max:"5",step:"0.1",value:eN,onChange:function(e){return ew(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"e.g., 4.5"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Rating from 0.0 to 5.0 (leave empty for no rating)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"ratingCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating Count"}),(0,o.jsx)("input",{id:"ratingCount",type:"number",min:"0",value:eC,onChange:function(e){return eS(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"e.g., 1250"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Number of reviews/ratings"})]})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"SEO Settings"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"metaTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title (for SEO)"}),(0,o.jsx)("input",{id:"metaTitle",type:"text",value:V,onChange:function(e){return B(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"SEO optimized title (defaults to post title)"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: 50-60 characters"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),(0,o.jsx)("textarea",{id:"metaDescription",value:M,onChange:function(e){return G(e.target.value)},rows:3,maxLength:160,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition resize-none",placeholder:"Brief description for search engines"}),(0,o.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[M.length,"/160 characters"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"keywords",className:"block text-sm font-medium text-gray-700 mb-2",children:"Keywords (comma-separated)"}),(0,o.jsx)("input",{id:"keywords",type:"text",value:W,onChange:function(e){return Z(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"keyword1, keyword2, keyword3"})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)(c.Z,{id:"featuredImage",value:H,onChange:Q,label:"Featured Image (also used for Open Graph)",placeholder:"https://example.com/image.jpg or upload"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"featuredImageAlt",className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image Alt Text"}),(0,o.jsx)("input",{id:"featuredImageAlt",type:"text",value:Y,onChange:function(e){return $(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition",placeholder:"Descriptive alt text for image"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"This image will be used for both the featured image and Open Graph (social media sharing)"})]})]})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Category (optional)"}),(0,o.jsxs)("select",{id:"category",value:L,onChange:function(e){return I(e.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"},children:[(0,o.jsx)("option",{value:"",children:"No Category"}),q.map(function(e){return(0,o.jsx)("option",{value:e.id,style:{color:"#000"},children:e.name},e.id)})]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-6",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{id:"published",type:"checkbox",checked:F,onChange:function(e){return D(e.target.checked)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"published",className:"ml-2 block text-sm text-gray-700",children:"Published"})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{id:"allowComments",type:"checkbox",checked:T,onChange:function(e){return A(e.target.checked)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"allowComments",className:"ml-2 block text-sm text-gray-700",children:"Allow Comments"})]})]})]}),(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsx)("button",{type:"submit",disabled:eF,className:"bg-button text-button hover:bg-secondary px-6 py-3 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:eF?"Updating...":"Update Post"}),(0,o.jsx)("button",{type:"button",onClick:eA,className:"bg-red-600 text-theme-text px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition",children:"Delete"}),(0,o.jsx)(d.default,{href:"/dashboard",className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})})]})}}},function(e){e.O(0,[572,902,972,29,236,753,971,117,744],function(){return e(e.s=6546)}),_N_E=e.O()}]);