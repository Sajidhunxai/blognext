(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{7214:function(e,r,t){Promise.resolve().then(t.bind(t,8707))},8707:function(e,r,t){"use strict";t.d(r,{default:function(){return m}});var o=t(2403),n=t(2249),a=t(5194),l=t(1780),s=t(3583),c=t(76),i=t(6200),d=t(7437),u=t(9376),b=t(2265),x=t(7648),f=t(8516),g=t(6476);function p(e){var r=e.children,t=e.onClick,o=e.href,n=e.type,a=void 0===n?"button":n,l=e.disabled,s=void 0!==l&&l,c=e.className,i=void 0===c?"":c,u=e.color,b=void 0===u?"button":u,x=(0,g.F)().colors,f={primary:x.primary,secondary:x.secondary,button:x.button,success:x.success,error:x.error,warning:x.warning,info:x.info},p="px-6 py-3 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed";if("button"===b||"primary"===b)return(0,d.jsx)(d.Fragment,{children:o?(0,d.jsx)("a",{href:o,className:"bg-button text-button hover:bg-secondary ".concat(p," ").concat(i),children:r}):(0,d.jsx)("button",{type:a,onClick:t,disabled:s,className:"bg-button text-button hover:bg-secondary ".concat(p," ").concat(i),children:r})});var m={backgroundColor:f[b],color:x.buttonText};return o?(0,d.jsx)("a",{href:o,className:"".concat(p," ").concat(i),style:m,children:r}):(0,d.jsx)("button",{type:a,onClick:t,disabled:s,className:"".concat(p," ").concat(i),style:m,children:r})}function m(e){var r,t=e.initialSettings,m=e.pages,h=(0,u.useRouter)(),y=(0,g.F)(),v=y.colors,j=y.updateColors,C=(0,s._)((0,b.useState)(!1),2),N=C[0],k=C[1],_=(0,s._)((0,b.useState)(""),2),S=_[0],w=_[1],L=(0,s._)((0,b.useState)(""),2),T=L[0],F=L[1],M=(0,s._)((0,b.useState)(m),2),U=M[0];M[1];var P=(0,s._)((0,b.useState)(t),2),R=P[0],B=P[1],E=(r=(0,o._)(function(e){var r;return(0,i.Jh)(this,function(t){switch(t.label){case 0:e.preventDefault(),w(""),F(""),k(!0),t.label=1;case 1:return t.trys.push([1,5,6,7]),[4,fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})];case 2:if((r=t.sent()).ok)return[3,4];return[4,r.json()];case 3:throw Error(t.sent().error||"Failed to save settings");case 4:return F("Settings saved successfully!"),j({primary:R.primaryColor,secondary:R.secondaryColor,background:R.backgroundColor,text:R.textColor,button:R.buttonColor,buttonText:R.buttonTextColor,link:R.linkColor,success:R.successColor,error:R.errorColor,warning:R.warningColor,info:R.infoColor}),setTimeout(function(){h.refresh()},1e3),[3,7];case 5:return w(t.sent().message||"Failed to save settings"),[3,7];case 6:return k(!1),[7];case 7:return[2]}})}),function(e){return r.apply(this,arguments)}),A=function(e,r){var t=(0,c._)(R.headerMenu);t[e]=r,B((0,l._)((0,a._)({},R),{headerMenu:t}))},H=function(e){var r=R.headerMenu.filter(function(r,t){return t!==e});B((0,l._)((0,a._)({},R),{headerMenu:r}))},O=function(e,r,t){var o,n=(0,c._)(R.footerLinks);(o="string"==typeof n[e]?{label:n[e],url:""}:(0,a._)({},n[e]))[r]=t,n[e]=o,B((0,l._)((0,a._)({},R),{footerLinks:n}))},Z=function(e){var r=R.footerLinks.filter(function(r,t){return t!==e});B((0,l._)((0,a._)({},R),{footerLinks:r}))};return(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",style:{"--theme-primary":v.primary,"--theme-button":v.button},children:[(0,d.jsx)("nav",{className:"border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:(0,d.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,d.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,d.jsx)(x.default,{href:"/dashboard",className:"text-2xl font-bold text-gray-900",children:"Blog CMS"})})})}),(0,d.jsx)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Site Settings"}),S&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:S}),T&&(0,d.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-6",children:T}),(0,d.jsxs)("form",{onSubmit:E,className:"space-y-8",children:[(0,d.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Basic Settings"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),(0,d.jsx)("input",{type:"text",value:R.siteName,onChange:function(e){return B((0,l._)((0,a._)({},R),{siteName:e.target.value}))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"},required:!0})]}),(0,d.jsx)("div",{children:(0,d.jsx)(f.Z,{id:"logo",value:R.logo,onChange:function(e){return B((0,l._)((0,a._)({},R),{logo:e}))},label:"Logo",placeholder:"Upload or enter logo URL"})}),(0,d.jsx)("div",{children:(0,d.jsx)(f.Z,{id:"favicon",value:R.favicon,onChange:function(e){return B((0,l._)((0,a._)({},R),{favicon:e}))},label:"Favicon",placeholder:"Upload or enter favicon URL"})})]})]}),(0,d.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Header Menu"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(p,{type:"button",onClick:function(){B((0,l._)((0,a._)({},R),{headerMenu:(0,c._)(R.headerMenu).concat([""])}))},color:"button",children:"+ Add Custom"}),U.length>0&&(0,d.jsxs)("select",{onChange:function(e){if(e.target.value){var r=U.find(function(r){return r.id===e.target.value});r&&(B((0,l._)((0,a._)({},R),{headerMenu:(0,c._)(R.headerMenu).concat([r.title])})),e.target.value="")}},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"},defaultValue:"",children:[(0,d.jsx)("option",{value:"",children:"Add Page..."}),U.map(function(e){return(0,d.jsx)("option",{value:e.id,children:e.title},e.id)})]})]})]}),(0,d.jsx)("div",{className:"space-y-2",children:R.headerMenu.map(function(e,r){return(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("input",{type:"text",value:e,onChange:function(e){return A(r,e.target.value)},placeholder:"Menu item name",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"}}),(0,d.jsx)("button",{type:"button",onClick:function(){return H(r)},className:"px-4 py-2 bg-red-600 text-theme-text rounded-lg hover:bg-red-700 transition",children:"Remove"})]},r)})}),(0,d.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Tip: Use page titles or custom menu names. First item links to home (/)."})]}),(0,d.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Footer Links"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(p,{type:"button",onClick:function(){B((0,l._)((0,a._)({},R),{footerLinks:(0,c._)(R.footerLinks).concat([{label:"",url:""}])}))},color:"button",children:"+ Add Custom"}),U.length>0&&(0,d.jsxs)("select",{onChange:function(e){if(e.target.value){var r=U.find(function(r){return r.id===e.target.value});r&&(B((0,l._)((0,a._)({},R),{footerLinks:(0,c._)(R.footerLinks).concat([{label:r.title,url:"/pages/".concat(r.slug)}])})),e.target.value="")}},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"},defaultValue:"",children:[(0,d.jsx)("option",{value:"",children:"Add Page..."}),U.map(function(e){return(0,d.jsx)("option",{value:e.id,children:e.title},e.id)})]})]})]}),(0,d.jsx)("div",{className:"space-y-2",children:R.footerLinks.map(function(e,r){var t="string"==typeof e?{label:e,url:""}:e;return(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("input",{type:"text",value:t.label,onChange:function(e){return O(r,"label",e.target.value)},placeholder:"Link label",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"}}),(0,d.jsx)("input",{type:"url",value:t.url,onChange:function(e){return O(r,"url",e.target.value)},placeholder:"URL (e.g., /pages/about or https://example.com)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"}}),(0,d.jsx)("button",{type:"button",onClick:function(){return Z(r)},className:"px-4 py-2 bg-red-600 text-theme-text rounded-lg hover:bg-red-700 transition",children:"Remove"})]},r)})}),(0,d.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Tip: Use page dropdown to add pages, or add custom links manually. Use relative paths like /pages/about for internal pages."})]}),(0,d.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Social Media Links"}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Object.keys(R.socialMedia).map(function(e){return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:e}),(0,d.jsx)("input",{type:"url",value:R.socialMedia[e]||"",onChange:function(r){return B((0,l._)((0,a._)({},R),{socialMedia:(0,l._)((0,a._)({},R.socialMedia),(0,n._)({},e,r.target.value))}))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"},placeholder:"".concat(e," URL")})]},e)})})]}),(0,d.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Hero Section"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hero Title"}),(0,d.jsx)("input",{type:"text",value:R.heroTitle,onChange:function(e){return B((0,l._)((0,a._)({},R),{heroTitle:e.target.value}))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hero Subtitle"}),(0,d.jsx)("input",{type:"text",value:R.heroSubtitle,onChange:function(e){return B((0,l._)((0,a._)({},R),{heroSubtitle:e.target.value}))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"}})]}),(0,d.jsx)("div",{children:(0,d.jsx)(f.Z,{id:"heroBackground",value:R.heroBackground,onChange:function(e){return B((0,l._)((0,a._)({},R),{heroBackground:e}))},label:"Hero Background Image",placeholder:"Upload or enter background image URL"})})]})]}),(0,d.jsxs)("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Comments Settings"}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("input",{id:"enableComments",type:"checkbox",checked:R.enableComments,onChange:function(e){return B((0,l._)((0,a._)({},R),{enableComments:e.target.checked}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,d.jsx)("label",{htmlFor:"enableComments",className:"ml-2 block text-sm text-gray-700",children:"Enable Comments Globally"})]}),(0,d.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"When enabled, comments can be posted on posts. Individual posts can also have comments disabled."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Theme Colors"}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{key:"primaryColor",label:"Primary Color",placeholder:"#dc2626"},{key:"secondaryColor",label:"Secondary Color",placeholder:"#16a34a"},{key:"backgroundColor",label:"Background Color",placeholder:"#111827"},{key:"textColor",label:"Text Color",placeholder:"#ffffff"},{key:"buttonColor",label:"Button Color",placeholder:"#dc2626"},{key:"buttonTextColor",label:"Button Text Color",placeholder:"#ffffff"},{key:"linkColor",label:"Link Color",placeholder:"#3b82f6"},{key:"successColor",label:"Success Color",placeholder:"#16a34a"},{key:"errorColor",label:"Error Color",placeholder:"#dc2626"},{key:"warningColor",label:"Warning Color",placeholder:"#f59e0b"},{key:"infoColor",label:"Info Color",placeholder:"#3b82f6"}].map(function(e){var r=e.key,t=e.label,o=e.placeholder;return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),(0,d.jsx)("input",{type:"color",value:R[r],onChange:function(e){return B((0,l._)((0,a._)({},R),(0,n._)({},r,e.target.value)))},className:"w-full h-12 border border-gray-300 rounded-lg cursor-pointer"}),(0,d.jsx)("input",{type:"text",value:R[r],onChange:function(e){return B((0,l._)((0,a._)({},R),(0,n._)({},r,e.target.value)))},className:"w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"},placeholder:o})]},r)})})]}),(0,d.jsxs)("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Custom Scripts & CSS"}),(0,d.jsx)("div",{className:"space-y-6",children:[{key:"headerScript",label:"Header Scripts (added in <head>)",placeholder:"<!-- Add scripts here -->",desc:"Scripts will be added in the <head> section"},{key:"footerScript",label:"Footer Scripts (added before </body>)",placeholder:"<!-- Add scripts here -->",desc:"Scripts will be added before the closing </body> tag"},{key:"headerCSS",label:"Header CSS (added in <head>)",placeholder:"/* Add custom CSS here */",desc:"CSS will be added in a <style> tag in the <head> section"},{key:"footerCSS",label:"Footer CSS (added before </body>)",placeholder:"/* Add custom CSS here */",desc:"CSS will be added in a <style> tag before the closing </body> tag"}].map(function(e){var r=e.key,t=e.label,o=e.placeholder,s=e.desc;return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),(0,d.jsx)("textarea",{value:R[r],onChange:function(e){return B((0,l._)((0,a._)({},R),(0,n._)({},r,e.target.value)))},rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition font-mono text-sm",style:{color:"#000",backgroundColor:"#f9fafb"},placeholder:o}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:s})]},r)})})]}),(0,d.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,d.jsx)(p,{type:"submit",disabled:N,color:"button",children:N?"Saving...":"Save Settings"}),(0,d.jsx)(x.default,{href:"/dashboard",className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})})]})}},8516:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var o=t(2403),n=t(3583),a=t(6200),l=t(7437),s=t(2265),c=t(6476);function i(e){var r,t=e.value,i=e.onChange,d=e.label,u=e.placeholder,b=e.id,x=(0,c.F)().colors,f=(0,n._)((0,s.useState)(!1),2),g=f[0],p=f[1],m=(0,n._)((0,s.useState)(""),2),h=m[0],y=m[1],v=(0,s.useRef)(null),j=(r=(0,o._)(function(e){var r,t,o,n;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!(t=null===(r=e.target.files)||void 0===r?void 0:r[0]))return[2];y(""),p(!0),a.label=1;case 1:return a.trys.push([1,6,7,8]),(o=new FormData).append("file",t),[4,fetch("/api/upload",{method:"POST",body:o})];case 2:if((n=a.sent()).ok)return[3,4];return[4,n.json()];case 3:throw Error(a.sent().error||"Upload failed");case 4:return[4,n.json()];case 5:return i(a.sent().url),[3,8];case 6:return y(a.sent().message||"Failed to upload image"),[3,8];case 7:return p(!1),v.current&&(v.current.value=""),[7];case 8:return[2]}})}),function(e){return r.apply(this,arguments)}),C=b||"image-upload-".concat(d.replace(/\s+/g,"-").toLowerCase());return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:C,className:"block text-sm font-medium text-gray-700 mb-2",children:d}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{id:C,type:"text",value:t,onChange:function(e){return i(e.target.value)},placeholder:void 0===u?"https://example.com/image.jpg":u,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"}}),(0,l.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:j,className:"hidden",id:"file-upload-".concat(d.replace(/\s+/g,"-").toLowerCase())}),(0,l.jsx)("label",{htmlFor:"file-upload-".concat(d.replace(/\s+/g,"-").toLowerCase()),className:"px-4 py-3 text-theme-text rounded-lg font-medium hover:opacity-90 transition cursor-pointer ".concat(g?"opacity-50 cursor-not-allowed":""),style:{backgroundColor:x.button},children:g?"Uploading...":"Upload"})]}),h&&(0,l.jsx)("p",{className:"mt-1 text-sm",style:{color:x.error},children:h}),t&&(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("img",{src:t,alt:"Preview",className:"max-w-xs h-auto rounded-lg border border-gray-200",onError:function(){return y("Failed to load image")}})})]})}},6476:function(e,r,t){"use strict";t.d(r,{F:function(){return b},f:function(){return u}});var o=t(5194),n=t(3583),a=t(7437),l=t(29),s=t.n(l),c=t(2265),i={primary:"#dc2626",secondary:"#16a34a",background:"#111827",text:"#ffffff",button:"#dc2626",buttonText:"#ffffff",link:"#3b82f6",success:"#16a34a",error:"#dc2626",warning:"#f59e0b",info:"#3b82f6"},d=(0,c.createContext)({colors:i,updateColors:function(){},loading:!0});function u(e){var r=e.children,t=e.initialColors,l=(0,n._)((0,c.useState)((0,o._)({},i,t)),2),u=l[0],b=l[1],x=(0,n._)((0,c.useState)(!1),2),f=x[0];return x[1],(0,c.useEffect)(function(){t&&b(function(e){return(0,o._)({},e,t)})},[t]),(0,a.jsxs)(d.Provider,{value:{colors:u,updateColors:function(e){b(function(r){return(0,o._)({},r,e)})},loading:f},children:[(0,a.jsx)(s(),{id:"bf4751f62e20a2f5",dynamic:[u.primary,u.secondary,u.background,u.text,u.button,u.buttonText,u.link,u.success,u.error,u.warning,u.info],children:":root{--color-primary:".concat(u.primary,";--color-secondary:").concat(u.secondary,";--color-background:").concat(u.background,";--color-text:").concat(u.text,";--color-button:").concat(u.button,";--color-button-text:").concat(u.buttonText,";--color-link:").concat(u.link,";--color-success:").concat(u.success,";--color-error:").concat(u.error,";--color-warning:").concat(u.warning,";--color-info:").concat(u.info,';--input-text-color:#000000}input[type="text"],input[type="email"],input[type="url"],input[type="password"],input[type="number"],input[type="search"],input[type="tel"],textarea,select{color:var(--input-text-color)!important}')}),r]})}function b(){try{var e=(0,c.useContext)(d);if(!e)return{colors:i,updateColors:function(){},loading:!1};return e}catch(e){return{colors:i,updateColors:function(){},loading:!1}}}},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return n.a}});var o=t(2972),n=t.n(o)},9376:function(e,r,t){"use strict";var o=t(5475);t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})}},function(e){e.O(0,[972,29,971,117,744],function(){return e(e.s=7214)}),_N_E=e.O()}]);