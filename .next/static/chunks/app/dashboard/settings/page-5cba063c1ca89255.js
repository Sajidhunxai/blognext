(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{7214:function(e,r,t){Promise.resolve().then(t.bind(t,8707))},8707:function(e,r,t){"use strict";t.d(r,{default:function(){return i}});var o=t(7437),a=t(9376),l=t(2265),s=t(7648),n=t(8516),c=t(6476);function d(e){let{children:r,onClick:t,href:a,type:l="button",disabled:s=!1,className:n="",color:d="button"}=e,{colors:i}=(0,c.F)(),u={primary:i.primary,secondary:i.secondary,button:i.button,success:i.success,error:i.error,warning:i.warning,info:i.info},b="text-white px-6 py-3 rounded-lg font-medium hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed",g={backgroundColor:u[d]};return a?(0,o.jsx)("a",{href:a,className:"".concat(b," ").concat(n),style:g,children:r}):(0,o.jsx)("button",{type:l,onClick:t,disabled:s,className:"".concat(b," ").concat(n),style:g,children:r})}function i(e){let{initialSettings:r,pages:t}=e,i=(0,a.useRouter)(),{colors:u,updateColors:b}=(0,c.F)(),[g,x]=(0,l.useState)(!1),[m,p]=(0,l.useState)(""),[h,f]=(0,l.useState)(""),[y,v]=(0,l.useState)(t),[j,C]=(0,l.useState)(r),N=async e=>{e.preventDefault(),p(""),f(""),x(!0);try{let e=await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!e.ok){let r=await e.json();throw Error(r.error||"Failed to save settings")}f("Settings saved successfully!"),b({primary:j.primaryColor,secondary:j.secondaryColor,background:j.backgroundColor,text:j.textColor,button:j.buttonColor,link:j.linkColor,success:j.successColor,error:j.errorColor,warning:j.warningColor,info:j.infoColor}),setTimeout(()=>{i.refresh()},1e3)}catch(e){p(e.message||"Failed to save settings")}finally{x(!1)}},k=(e,r)=>{let t=[...j.headerMenu];t[e]=r,C({...j,headerMenu:t})},S=e=>{let r=j.headerMenu.filter((r,t)=>t!==e);C({...j,headerMenu:r})},w=(e,r,t)=>{let o;let a=[...j.footerLinks];(o="string"==typeof a[e]?{label:a[e],url:""}:{...a[e]})[r]=t,a[e]=o,C({...j,footerLinks:a})},L=e=>{let r=j.footerLinks.filter((r,t)=>t!==e);C({...j,footerLinks:r})};return(0,o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",style:{"--theme-primary":u.primary,"--theme-button":u.button},children:[(0,o.jsx)("nav",{className:"border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,o.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,o.jsx)(s.default,{href:"/dashboard",className:"text-2xl font-bold text-gray-900",children:"Blog CMS"})})})}),(0,o.jsx)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Site Settings"}),m&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:m}),h&&(0,o.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-6",children:h}),(0,o.jsxs)("form",{onSubmit:N,className:"space-y-8",children:[(0,o.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Basic Settings"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),(0,o.jsx)("input",{type:"text",value:j.siteName,onChange:e=>C({...j,siteName:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"},required:!0})]}),(0,o.jsx)("div",{children:(0,o.jsx)(n.Z,{id:"logo",value:j.logo,onChange:e=>C({...j,logo:e}),label:"Logo",placeholder:"Upload or enter logo URL"})}),(0,o.jsx)("div",{children:(0,o.jsx)(n.Z,{id:"favicon",value:j.favicon,onChange:e=>C({...j,favicon:e}),label:"Favicon",placeholder:"Upload or enter favicon URL"})})]})]}),(0,o.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Header Menu"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(d,{type:"button",onClick:()=>{C({...j,headerMenu:[...j.headerMenu,""]})},color:"button",children:"+ Add Custom"}),y.length>0&&(0,o.jsxs)("select",{onChange:e=>{if(e.target.value){let r=y.find(r=>r.id===e.target.value);r&&(C({...j,headerMenu:[...j.headerMenu,r.title]}),e.target.value="")}},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"},defaultValue:"",children:[(0,o.jsx)("option",{value:"",children:"Add Page..."}),y.map(e=>(0,o.jsx)("option",{value:e.id,children:e.title},e.id))]})]})]}),(0,o.jsx)("div",{className:"space-y-2",children:j.headerMenu.map((e,r)=>(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"text",value:e,onChange:e=>k(r,e.target.value),placeholder:"Menu item name",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"}}),(0,o.jsx)("button",{type:"button",onClick:()=>S(r),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Remove"})]},r))}),(0,o.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Tip: Use page titles or custom menu names. First item links to home (/)."})]}),(0,o.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Footer Links"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(d,{type:"button",onClick:()=>{C({...j,footerLinks:[...j.footerLinks,{label:"",url:""}]})},color:"button",children:"+ Add Custom"}),y.length>0&&(0,o.jsxs)("select",{onChange:e=>{if(e.target.value){let r=y.find(r=>r.id===e.target.value);r&&(C({...j,footerLinks:[...j.footerLinks,{label:r.title,url:"/pages/".concat(r.slug)}]}),e.target.value="")}},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"},defaultValue:"",children:[(0,o.jsx)("option",{value:"",children:"Add Page..."}),y.map(e=>(0,o.jsx)("option",{value:e.id,children:e.title},e.id))]})]})]}),(0,o.jsx)("div",{className:"space-y-2",children:j.footerLinks.map((e,r)=>{let t="string"==typeof e?{label:e,url:""}:e;return(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"text",value:t.label,onChange:e=>w(r,"label",e.target.value),placeholder:"Link label",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"}}),(0,o.jsx)("input",{type:"url",value:t.url,onChange:e=>w(r,"url",e.target.value),placeholder:"URL (e.g., /pages/about or https://example.com)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"}}),(0,o.jsx)("button",{type:"button",onClick:()=>L(r),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Remove"})]},r)})}),(0,o.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Tip: Use page dropdown to add pages, or add custom links manually. Use relative paths like /pages/about for internal pages."})]}),(0,o.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Social Media Links"}),(0,o.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Object.keys(j.socialMedia).map(e=>(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:e}),(0,o.jsx)("input",{type:"url",value:j.socialMedia[e]||"",onChange:r=>C({...j,socialMedia:{...j.socialMedia,[e]:r.target.value}}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"},placeholder:"".concat(e," URL")})]},e))})]}),(0,o.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Hero Section"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hero Title"}),(0,o.jsx)("input",{type:"text",value:j.heroTitle,onChange:e=>C({...j,heroTitle:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hero Subtitle"}),(0,o.jsx)("input",{type:"text",value:j.heroSubtitle,onChange:e=>C({...j,heroSubtitle:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"}})]}),(0,o.jsx)("div",{children:(0,o.jsx)(n.Z,{id:"heroBackground",value:j.heroBackground,onChange:e=>C({...j,heroBackground:e}),label:"Hero Background Image",placeholder:"Upload or enter background image URL"})})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Comments Settings"}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{id:"enableComments",type:"checkbox",checked:j.enableComments,onChange:e=>C({...j,enableComments:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"enableComments",className:"ml-2 block text-sm text-gray-700",children:"Enable Comments Globally"})]}),(0,o.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"When enabled, comments can be posted on posts. Individual posts can also have comments disabled."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Theme Colors"}),(0,o.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{key:"primaryColor",label:"Primary Color",placeholder:"#dc2626"},{key:"secondaryColor",label:"Secondary Color",placeholder:"#16a34a"},{key:"backgroundColor",label:"Background Color",placeholder:"#111827"},{key:"textColor",label:"Text Color",placeholder:"#ffffff"},{key:"buttonColor",label:"Button Color",placeholder:"#dc2626"},{key:"linkColor",label:"Link Color",placeholder:"#3b82f6"},{key:"successColor",label:"Success Color",placeholder:"#16a34a"},{key:"errorColor",label:"Error Color",placeholder:"#dc2626"},{key:"warningColor",label:"Warning Color",placeholder:"#f59e0b"},{key:"infoColor",label:"Info Color",placeholder:"#3b82f6"}].map(e=>{let{key:r,label:t,placeholder:a}=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),(0,o.jsx)("input",{type:"color",value:j[r],onChange:e=>C({...j,[r]:e.target.value}),className:"w-full h-12 border border-gray-300 rounded-lg cursor-pointer"}),(0,o.jsx)("input",{type:"text",value:j[r],onChange:e=>C({...j,[r]:e.target.value}),className:"w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-gray-900",style:{color:"#000"},placeholder:a})]},r)})})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Custom Scripts & CSS"}),(0,o.jsx)("div",{className:"space-y-6",children:[{key:"headerScript",label:"Header Scripts (added in <head>)",placeholder:"<!-- Add scripts here -->",desc:"Scripts will be added in the <head> section"},{key:"footerScript",label:"Footer Scripts (added before </body>)",placeholder:"<!-- Add scripts here -->",desc:"Scripts will be added before the closing </body> tag"},{key:"headerCSS",label:"Header CSS (added in <head>)",placeholder:"/* Add custom CSS here */",desc:"CSS will be added in a <style> tag in the <head> section"},{key:"footerCSS",label:"Footer CSS (added before </body>)",placeholder:"/* Add custom CSS here */",desc:"CSS will be added in a <style> tag before the closing </body> tag"}].map(e=>{let{key:r,label:t,placeholder:a,desc:l}=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),(0,o.jsx)("textarea",{value:j[r],onChange:e=>C({...j,[r]:e.target.value}),rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition font-mono text-sm",style:{color:"#000",backgroundColor:"#f9fafb"},placeholder:a}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:l})]},r)})})]}),(0,o.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,o.jsx)(d,{type:"submit",disabled:g,color:"button",children:g?"Saving...":"Save Settings"}),(0,o.jsx)(s.default,{href:"/dashboard",className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition",children:"Cancel"})]})]})]})})]})}},8516:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var o=t(7437),a=t(2265),l=t(6476);function s(e){let{value:r,onChange:t,label:s,placeholder:n="https://example.com/image.jpg",id:c}=e,{colors:d}=(0,l.F)(),[i,u]=(0,a.useState)(!1),[b,g]=(0,a.useState)(""),x=(0,a.useRef)(null),m=async e=>{var r;let o=null===(r=e.target.files)||void 0===r?void 0:r[0];if(o){g(""),u(!0);try{let e=new FormData;e.append("file",o);let r=await fetch("/api/upload",{method:"POST",body:e});if(!r.ok){let e=await r.json();throw Error(e.error||"Upload failed")}let a=await r.json();t(a.url)}catch(e){g(e.message||"Failed to upload image")}finally{u(!1),x.current&&(x.current.value="")}}},p=c||"image-upload-".concat(s.replace(/\s+/g,"-").toLowerCase());return(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:p,className:"block text-sm font-medium text-gray-700 mb-2",children:s}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{id:p,type:"text",value:r,onChange:e=>t(e.target.value),placeholder:n,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition text-gray-900",style:{color:"#000"}}),(0,o.jsx)("input",{ref:x,type:"file",accept:"image/*",onChange:m,className:"hidden",id:"file-upload-".concat(s.replace(/\s+/g,"-").toLowerCase())}),(0,o.jsx)("label",{htmlFor:"file-upload-".concat(s.replace(/\s+/g,"-").toLowerCase()),className:"px-4 py-3 text-white rounded-lg font-medium hover:opacity-90 transition cursor-pointer ".concat(i?"opacity-50 cursor-not-allowed":""),style:{backgroundColor:d.button},children:i?"Uploading...":"Upload"})]}),b&&(0,o.jsx)("p",{className:"mt-1 text-sm",style:{color:d.error},children:b}),r&&(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)("img",{src:r,alt:"Preview",className:"max-w-xs h-auto rounded-lg border border-gray-200",onError:()=>g("Failed to load image")})})]})}},6476:function(e,r,t){"use strict";t.d(r,{F:function(){return i},f:function(){return d}});var o=t(7437),a=t(29),l=t.n(a),s=t(2265);let n={primary:"#dc2626",secondary:"#16a34a",background:"#111827",text:"#ffffff",button:"#dc2626",link:"#3b82f6",success:"#16a34a",error:"#dc2626",warning:"#f59e0b",info:"#3b82f6"},c=(0,s.createContext)({colors:n,updateColors:()=>{},loading:!0});function d(e){let{children:r,initialColors:t}=e,[a,d]=(0,s.useState)({...n,...t}),[i,u]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{t&&d(e=>({...e,...t}))},[t]),(0,o.jsxs)(c.Provider,{value:{colors:a,updateColors:e=>{d(r=>({...r,...e}))},loading:i},children:[(0,o.jsx)(l(),{id:"1c3912cf94424ad2",dynamic:[a.primary,a.secondary,a.background,a.text,a.button,a.link,a.success,a.error,a.warning,a.info],children:":root{--color-primary:".concat(a.primary,";--color-secondary:").concat(a.secondary,";--color-background:").concat(a.background,";--color-text:").concat(a.text,";--color-button:").concat(a.button,";--color-link:").concat(a.link,";--color-success:").concat(a.success,";--color-error:").concat(a.error,";--color-warning:").concat(a.warning,";--color-info:").concat(a.info,';--input-text-color:#000000}input[type="text"],input[type="email"],input[type="url"],input[type="password"],input[type="number"],input[type="search"],input[type="tel"],textarea,select{color:var(--input-text-color)!important}')}),r]})}function i(){try{let e=(0,s.useContext)(c);if(!e)return{colors:n,updateColors:()=>{},loading:!1};return e}catch(e){return{colors:n,updateColors:()=>{},loading:!1}}}},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return a.a}});var o=t(2972),a=t.n(o)},9376:function(e,r,t){"use strict";var o=t(5475);t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})}},function(e){e.O(0,[972,29,971,117,744],function(){return e(e.s=7214)}),_N_E=e.O()}]);