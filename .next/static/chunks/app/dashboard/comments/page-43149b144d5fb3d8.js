(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{2852:function(e,t,r){Promise.resolve().then(r.bind(r,8050))},8050:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),s=r(2265),n=r(7648),o=r(9376);function c(){(0,o.useRouter)();let[e,t]=(0,s.useState)([]),[r,c]=(0,s.useState)(!0),[l,i]=(0,s.useState)("all");(0,s.useEffect)(()=>{d()},[l]);let d=async()=>{try{let e=await fetch("all"===l?"/api/comments":"/api/comments?approved=".concat("approved"===l));if(e.ok){let r=await e.json();t(r)}}catch(e){console.error("Error fetching comments:",e)}finally{c(!1)}},m=async(e,t)=>{try{(await fetch("/api/comments/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:t})})).ok&&d()}catch(e){console.error("Error updating comment:",e)}},x=async e=>{if(confirm("Are you sure you want to delete this comment?"))try{(await fetch("/api/comments/".concat(e),{method:"DELETE"})).ok&&d()}catch(e){console.error("Error deleting comment:",e)}};return r?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading comments..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,a.jsx)("nav",{className:"border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,a.jsx)(n.default,{href:"/dashboard",className:"text-2xl font-bold text-gray-900",children:"Blog CMS"})})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Comments"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>i("all"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("all"===l?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All"}),(0,a.jsx)("button",{onClick:()=>i("pending"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("pending"===l?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Pending"}),(0,a.jsx)("button",{onClick:()=>i("approved"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("approved"===l?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Approved"})]})]}),0===e.length?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"No comments found."})}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-6 ".concat(e.approved?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.authorName}),e.authorWebsite&&(0,a.jsx)("a",{href:e.authorWebsite,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:e.authorWebsite}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,a.jsxs)(n.default,{href:"/posts/".concat(e.post.slug),className:"text-sm text-blue-600 hover:underline",children:["On: ",e.post.title]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[!e.approved&&(0,a.jsx)("button",{onClick:()=>m(e.id,!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm",children:"Approve"}),e.approved&&(0,a.jsx)("button",{onClick:()=>m(e.id,!1),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition text-sm",children:"Unapprove"}),(0,a.jsx)("button",{onClick:()=>x(e.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm",children:"Delete"})]})]}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.content}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:e.authorEmail})]},e.id))})]})})]})}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(2972),s=r.n(a)},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=2852)}),_N_E=e.O()}]);