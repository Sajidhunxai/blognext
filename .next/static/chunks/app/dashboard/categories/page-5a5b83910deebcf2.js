(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{9314:function(e,t,r){Promise.resolve().then(r.bind(r,6195))},6195:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var a=r(7437),s=r(2265),n=r(7648),i=r(9376);function l(){(0,i.useRouter)();let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[o,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),[x,g]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[p,y]=(0,s.useState)(""),[b,f]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null),[w,v]=(0,s.useState)(""),[C,S]=(0,s.useState)("");(0,s.useEffect)(()=>{k()},[]);let k=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let r=await e.json();t(r)}}catch(e){console.error("Error fetching categories:",e)}finally{l(!1)}},E=e=>e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),P=async e=>{e.preventDefault(),v(""),S(""),f(!0);try{let e=c?{id:c.id,name:x,slug:m||E(x),description:p}:{name:x,slug:m||E(x),description:p},t=await fetch("/api/categories",{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to ".concat(c?"update":"create"," category"))}g(""),h(""),y(""),d(!1),u(null),S("Category ".concat(c?"updated":"created"," successfully!")),k(),setTimeout(()=>S(""),3e3)}catch(e){v(e.message)}finally{f(!1)}},T=e=>{u(e),g(e.name),h(e.slug),y(e.description||""),d(!0),v(""),S(""),window.scrollTo({top:0,behavior:"smooth"})},_=()=>{d(!1),u(null),g(""),h(""),y(""),v(""),S("")},D=async e=>{if(confirm("Are you sure you want to delete this category? This action cannot be undone.")){N(e),v(""),S("");try{let t=await fetch("/api/categories?id=".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete category")}S("Category deleted successfully!"),k(),setTimeout(()=>S(""),3e3)}catch(e){v(e.message)}finally{N(null)}}};return r?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading categories..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,a.jsx)("nav",{className:"border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,a.jsx)(n.default,{href:"/dashboard",className:"text-2xl font-bold text-gray-900",children:"Blog CMS"})})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Categories"}),(0,a.jsx)("button",{onClick:()=>{o?_():(d(!0),u(null),g(""),h(""),y(""),v(""),S(""))},className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition",children:o?"Cancel":"New Category"})]}),C&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4",children:C}),w&&!o&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:w}),o&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:c?"Edit Category":"Create New Category"}),w&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:w}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),(0,a.jsx)("input",{id:"name",type:"text",value:x,onChange:e=>{let t=e.target.value;g(t),m&&m!==E(x)||h(E(t))},required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug *"}),(0,a.jsx)("input",{id:"slug",type:"text",value:m,onChange:e=>h(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (optional)"}),(0,a.jsx)("textarea",{id:"description",value:p,onChange:e=>y(e.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"submit",disabled:b,className:"px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition disabled:opacity-50",children:b?c?"Updating...":"Creating...":c?"Update Category":"Create Category"}),(0,a.jsx)("button",{type:"button",onClick:_,disabled:b,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition disabled:opacity-50",children:"Cancel"})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:0===e.length?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"No categories yet. Create your first category!"})}):(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Posts"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.slug}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null===(t=e._count)||void 0===t?void 0:t.posts)||0}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>T(e),className:"text-blue-600 hover:text-blue-900 transition",title:"Edit category",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>D(e.id),disabled:j===e.id,className:"text-red-600 hover:text-red-900 transition disabled:opacity-50",title:"Delete category",children:j===e.id?"Deleting...":"Delete"})]})})]},e.id)})})]})})]})]})}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(2972),s=r.n(a)},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=9314)}),_N_E=e.O()}]);