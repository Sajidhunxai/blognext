(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{9314:function(e,t,r){Promise.resolve().then(r.bind(r,6195))},6195:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(2403),a=r(3583),n=r(6200),i=r(7437),o=r(2265),c=r(7648),l=r(9376);function d(){(0,l.useRouter)();var e,t,r,d=(0,a._)((0,o.useState)([]),2),u=d[0],x=d[1],m=(0,a._)((0,o.useState)(!0),2),g=m[0],h=m[1],p=(0,a._)((0,o.useState)(!1),2),b=p[0],f=p[1],y=(0,a._)((0,o.useState)(null),2),j=y[0],N=y[1],v=(0,a._)((0,o.useState)(""),2),w=v[0],C=v[1],k=(0,a._)((0,o.useState)(""),2),_=k[0],S=k[1],E=(0,a._)((0,o.useState)(""),2),P=E[0],F=E[1],T=(0,a._)((0,o.useState)(!1),2),D=T[0],J=T[1],O=(0,a._)((0,o.useState)(!1),2),R=O[0],L=O[1],U=(0,a._)((0,o.useState)(null),2),q=U[0],A=U[1],B=(0,a._)((0,o.useState)(""),2),M=B[0],z=B[1],G=(0,a._)((0,o.useState)(""),2),H=G[0],I=G[1];(0,o.useEffect)(function(){K()},[]);var K=(e=(0,s._)(function(){var e;return(0,n.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,5,6]),[4,fetch("/api/categories")];case 1:if(!(e=t.sent()).ok)return[3,3];return[4,e.json()];case 2:x(t.sent()),t.label=3;case 3:return[3,6];case 4:return console.error("Error fetching categories:",t.sent()),[3,6];case 5:return h(!1),[7];case 6:return[2]}})}),function(){return e.apply(this,arguments)}),Q=function(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()},V=(t=(0,s._)(function(e){var t;return(0,n.Jh)(this,function(r){switch(r.label){case 0:e.preventDefault(),z(""),I(""),L(!0),r.label=1;case 1:return r.trys.push([1,5,6,7]),[4,fetch("/api/categories",{method:j?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j?{id:j.id,name:w,slug:_||Q(w),description:P,featured:D}:{name:w,slug:_||Q(w),description:P,featured:D})})];case 2:if((t=r.sent()).ok)return[3,4];return[4,t.json()];case 3:throw Error(r.sent().error||"Failed to ".concat(j?"update":"create"," category"));case 4:return C(""),S(""),F(""),J(!1),f(!1),N(null),I("Category ".concat(j?"updated":"created"," successfully!")),K(),setTimeout(function(){return I("")},3e3),[3,7];case 5:return z(r.sent().message),[3,7];case 6:return L(!1),[7];case 7:return[2]}})}),function(e){return t.apply(this,arguments)}),W=function(e){N(e),C(e.name),S(e.slug),F(e.description||""),J(e.featured||!1),f(!0),z(""),I(""),window.scrollTo({top:0,behavior:"smooth"})},X=function(){f(!1),N(null),C(""),S(""),F(""),J(!1),z(""),I("")},Y=(r=(0,s._)(function(e){var t;return(0,n.Jh)(this,function(r){switch(r.label){case 0:if(!confirm("Are you sure you want to delete this category? This action cannot be undone."))return[2];A(e),z(""),I(""),r.label=1;case 1:return r.trys.push([1,5,6,7]),[4,fetch("/api/categories?id=".concat(e),{method:"DELETE"})];case 2:if((t=r.sent()).ok)return[3,4];return[4,t.json()];case 3:throw Error(r.sent().error||"Failed to delete category");case 4:return I("Category deleted successfully!"),K(),setTimeout(function(){return I("")},3e3),[3,7];case 5:return z(r.sent().message),[3,7];case 6:return A(null),[7];case 7:return[2]}})}),function(e){return r.apply(this,arguments)});return g?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Loading categories..."})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,i.jsx)("nav",{className:"border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,i.jsx)(c.default,{href:"/dashboard",className:"text-2xl font-bold text-gray-900",children:"Blog CMS"})})})}),(0,i.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Categories"}),(0,i.jsx)("button",{onClick:function(){b?X():(f(!0),N(null),C(""),S(""),F(""),J(!1),z(""),I(""))},className:"px-4 py-2 bg-button text-button rounded-lg hover:bg-secondary transition",children:b?"Cancel":"New Category"})]}),H&&(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4",children:H}),M&&!b&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:M}),b&&(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:j?"Edit Category":"Create New Category"}),M&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:M}),(0,i.jsxs)("form",{onSubmit:V,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),(0,i.jsx)("input",{id:"name",type:"text",value:w,onChange:function(e){var t=e.target.value;C(t),_&&_!==Q(w)||S(Q(t))},required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug *"}),(0,i.jsx)("input",{id:"slug",type:"text",value:_,onChange:function(e){return S(e.target.value)},required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (optional)"}),(0,i.jsx)("textarea",{id:"description",value:P,onChange:function(e){return F(e.target.value)},rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{id:"featured",type:"checkbox",checked:D,onChange:function(e){return J(e.target.checked)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsx)("label",{htmlFor:"featured",className:"ml-2 block text-sm text-gray-700",children:"Featured Category (show on homepage)"})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{type:"submit",disabled:R,className:"px-6 py-3 bg-button text-button hover:bg-secondary rounded-lg transition disabled:opacity-50",children:R?j?"Updating...":"Creating...":j?"Update Category":"Create Category"}),(0,i.jsx)("button",{type:"button",onClick:X,disabled:R,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition disabled:opacity-50",children:"Cancel"})]})]})]}),(0,i.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:0===u.length?(0,i.jsx)("div",{className:"text-center py-12",children:(0,i.jsx)("p",{className:"text-gray-500 text-lg",children:"No categories yet. Create your first category!"})}):(0,i.jsxs)("table",{className:"w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,i.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),(0,i.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Posts"}),(0,i.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(function(e){var t;return(0,i.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.featured&&(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded",children:"Featured"})]}),e.description&&(0,i.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.slug}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null===(t=e._count)||void 0===t?void 0:t.posts)||0}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,i.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,i.jsx)("button",{onClick:function(){return W(e)},className:"text-blue-600 hover:text-blue-900 transition",title:"Edit category",children:"Edit"}),(0,i.jsx)("button",{onClick:function(){return Y(e.id)},disabled:q===e.id,className:"text-red-600 hover:text-red-900 transition disabled:opacity-50",title:"Delete category",children:q===e.id?"Deleting...":"Delete"})]})})]},e.id)})})]})})]})]})}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(2972),a=r.n(s)},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=9314)}),_N_E=e.O()}]);